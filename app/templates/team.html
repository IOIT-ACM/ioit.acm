{% extends "base.html" %} {% block title %}Our Team - IOIT ACM{% endblock %} {%
block og_title %}We are IOIT ACM - Our Team{% endblock %} {% block
og_description %}Meet the passionate individuals behind IOIT ACM. A team of
skilled members dedicated to innovating and building world-class applications
and experiences.{% endblock %} {% block og_image %}{{ url_for('static',
filename='img/team/team.jpeg') }}{% endblock %} {% block twitter_image %}{{
url_for('static', filename='img/team/team.jpeg') }}{% endblock %} {% block
twitter_title %}Our Team - IOIT ACM{% endblock %} {% block twitter_description
%}Meet the IOIT ACM team: a group of passionate individuals transforming novel
ideas into real-life applications. Join us in our journey to innovate.{%
endblock %} {% block content %}
<div
  class="relative h-auto md:mt-0 mt-20 md:h-[100vh] flex flex-col md:flex-row items-center justify-between bg-gray-100"
>
  <!-- Team Image -->
  <div class="w-full h-auto md:w-1/2 md:h-full px-4 md:px-0 parallax-scroll">
    <img
      src="{{ url_for('static', filename='img/team/team.jpeg') }}"
      alt="Team Header Image"
      class="object-cover bg-gray-300 h-full w-full rounded-br-[200px] md:rounded-br-[200px] rounded-tl-[200px] md:rounded-none border-2 border-blue-400 sm:border-none md:border-none"
    />
  </div>

  <!-- Text Content -->
  <div class="w-full md:w-1/2 text-left p-8 md:p-16 gsap-reveal">
    <h1 class="text-3xl md:text-5xl font-extrabold text-blue-600 mb-4">
      We are IOIT ACM
    </h1>
    <p class="text-gray-700 mb-6 text-base md:text-lg">
      The brilliance of IOIT ACM is made possible by the dedication of our team.
      Get to know the leaders and feel free to reach out to them!
    </p>
  </div>
</div>

<div id="team-section" class="text-center my-16 px-4">
  <h2 class="text-4xl font-bold text-blue-600 mb-6">Meet Our Team</h2>

  <!-- Dropdown for Year Selection -->
  <div class="mb-6">
    <label for="year-select" class="text-lg font-semibold">Select Year</label>
    <select id="year-select" class="p-2 rounded-md border border-gray-300">
      {% for year in years %}
      <option value="{{ year }}">{{ year }}</option>
      {% endfor %}
    </select>
  </div>

  <!-- Faculty Sponsor Centered -->
  <div class="flex justify-center mb-12">
    <div
      class="p-6 bg-white shadow-md rounded-lg hover:shadow-xl transition-shadow duration-300 w-full max-w-sm mx-auto"
      role="presentation"
    >
      <img
        src="/static/img/team/meenakshi-thalor.jpg"
        alt="Portrait of Dr. Meenakshi Thalor"
        class="w-full h-auto object-cover rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300"
      />
      <div class="text-center mt-4">
        <h3
          class="text-xl font-medium text-gray-800 hover:text-blue-600 transition-colors duration-200"
        >
          Dr. Meenakshi Thalor
        </h3>
        <p class="text-gray-500 text-sm mt-1">Faculty Sponsor</p>
        <div class="mt-3">
          <a
            href="https://www.linkedin.com/in/dr-meenakshi-thalor-03937840/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-blue-600 hover:text-blue-400 transition duration-200 inline-flex gap-2 items-center"
          >
            <i class="fab fa-linkedin text-lg mr-1"></i>
            <span class="text-sm">Connect on LinkedIn</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Team Members Grid -->
  <div
    id="team-cards"
    class="grid grid-cols-2 md:grid-cols-3 gap-6 p-6 mx-auto max-w-7xl"
  ></div>
</div>

<!-- Team Member Template -->
<template id="team-member-template">
  <div
    class="flex flex-col items-center text-blue-600 rounded-lg overflow-hidden gsap-reveal"
  >
    <!-- Image Section -->
    <div
      class="w-44 h-44 md:w-52 md:h-52 bg-gray-100 border border-gray-300 overflow-hidden rounded-full mb-4 shadow-lg"
    >
      <img
        src=""
        alt=""
        class="w-full h-full object-cover object-top transition-transform duration-300 hover:scale-110"
      />
    </div>
    <!-- Text Section -->
    <div class="p-4 text-center">
      <h3 class="text-lg font-semibold text-blue-800"></h3>
      <p class="text-sm text-gray-500 mb-3"></p>
      <div class="flex flex-row justify-center items-center gap-3"></div>
    </div>
  </div>
</template>

<script>
  const teamCardsContainer = document.getElementById("team-cards");
  const teamMemberTemplate = document.getElementById(
    "team-member-template",
  ).content;

  let currentYear = "{{ latest_year }}";

  function updateTeamCards(teamData) {
    teamCardsContainer.innerHTML = "";

    teamData.forEach((member) => {
      const clone = document.importNode(teamMemberTemplate, true);

      // Populate template with member details
      clone.querySelector("img").src = member.image;
      clone.querySelector("img").alt = member.name;
      clone.querySelector("h3").textContent = member.name;
      clone.querySelector("p").textContent = member.title;

      // social links
      const socialLinksContainer = clone.querySelector("div.flex.flex-row");
      if (member.github)
        addSocialLink(
          socialLinksContainer,
          member.github,
          "fab fa-github",
          "text-gray-600",
        );
      if (member.linkedin)
        addSocialLink(
          socialLinksContainer,
          member.linkedin,
          "fab fa-linkedin",
          "text-blue-600",
        );
      if (member.instagram)
        addSocialLink(
          socialLinksContainer,
          member.instagram,
          "fab fa-instagram",
          "text-pink-600",
        );
      if (member.linktree)
        addSocialLink(
          socialLinksContainer,
          member.linktree,
          "fas fa-link",
          "text-green-600",
        );

      // Append the card to the container
      teamCardsContainer.appendChild(clone);
    });
  }

  // Function to add a social link to the card
  function addSocialLink(container, url, iconClass, colorClass) {
    const link = document.createElement("a");
    link.href = url;
    link.target = "_blank";
    link.className = `${colorClass} hover:${colorClass}-400 transition duration-200`;
    link.innerHTML = `<i class="${iconClass} text-lg"></i>`;
    container.appendChild(link);
  }

  // Function to fetch team data based on the year
  function fetchTeamData(year) {
    return fetch(`/fetch-team?year=${year}`)
      .then((response) => response.json())
      .catch((error) => {
        console.error(error);
        teamCardsContainer.innerHTML =
          '<p class="text-red-500">Failed to load team data. Please try again later.</p>';
      });
  }

  // Initially fetch and render the team data for the latest year
  fetchTeamData(currentYear).then((teamData) => {
    updateTeamCards(teamData);
  });

  // Fetch team data and update the cards when the user changes the year
  document
    .getElementById("year-select")
    .addEventListener("change", function (e) {
      const selectedYear = e.target.value;
      currentYear = selectedYear;
      teamCardsContainer.innerHTML = "<p>Loading...</p>";
      fetchTeamData(currentYear).then((teamData) => {
        updateTeamCards(teamData);
      });
    });
</script>
{% endblock %}
