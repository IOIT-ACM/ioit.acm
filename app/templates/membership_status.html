{% extends "base.html" %} {% block title %}Membership{% endblock %} {% block
content %}

<div class="flex flex-col min-h-screen m-0">
  <div class="flex-grow mt-20">
    <div
      class="overflow-x-auto w-full max-md:text-sm min-h-screen max-w-7xl mx-auto md:p-6 p-4 rounded-lg"
    >
      <h1 class="text-4xl max-sm:text-2xl font-extrabold text-gray-900 mb-6">
        Membership Details AISMS IOIT
      </h1>

      <div class="mt-4 text-gray-600 mb-6 text-sm">
        Showing {{ members|length }} members.
      </div>
      <table class="table-auto border-collapse w-full border border-gray-300">
        <thead class="bg-blue-100">
          <tr>
            <th
              class="border border-gray-300 px-3 md:px-36 py-3 text-left font-semibold text-gray-700"
            >
              Membership ID
            </th>
            <th
              class="border border-gray-300 px-3 md:px-36 py-3 text-left font-semibold text-gray-700"
            >
              Name
            </th>
            <th
              class="border border-gray-300 px-3 md:px-36 py-3 text-left font-semibold text-gray-700"
            >
              Expiration Date
            </th>
          </tr>
        </thead>
        <tbody id="membership-table-body">
          {% for member in members %}
          <tr
            class="hover:bg-gray-200 odd:bg-gray-100 even:bg-white transition-colors duration-200"
          >
            <td class="border border-gray-300 px-4 md:px-6 py-3 text-gray-800">
              {{ member["Membership ID"] }}
            </td>
            <td class="border border-gray-300 px-4 md:px-6 py-3 text-gray-800">
              {{ member["First Name"] | title }} {{ member["Last Name"] | title
              }}
            </td>
            <td class="border border-gray-300 px-4 md:px-6 py-3 text-gray-800">
              {{ member["Expiration Date"] }}
            </td>
          </tr>
          {% endfor %}
          <!-- Hidden row for no results -->
          <tr id="no-results-row" style="display: none">
            <td colspan="3" class="text-center text-gray-500 py-6">
              No results found. Difficulties finding your details? Check the
              <a
                href="https://docs.google.com/spreadsheets/d/1ULb4cevuGP-hevy-F-aqdQZtU7DH5Q3Vt_ML-12SjJM/edit?ouid=107827516094424942677&usp=sheets_home&ths=true"
                target="_blank"
                class="text-blue-500 hover:underline"
                >spreadsheet</a
              >
              or contact Sakshi Mane.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div
      id="search-bar"
      class="sticky bottom-0 left-0 right-0 flex justify-center bg-gradient-to-r from-blue-800 to-blue-600 rounded-t-[40px] p-4 z-50"
    >
      <div class="w-full max-w-screen-md px-4">
        <input
          type="search"
          id="search-input-field"
          placeholder="Search..."
          class="w-full px-4 py-2 rounded-full bg-gray-300 text-black h-12 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>
    </div>
  </div>

  <div
    class="bg-gradient-to-r from-blue-800 to-blue-600 py-4 px-3 text-center flex flex-col md:flex-row items-center justify-between text-white shadow-lg"
  >
    <h2 class="text-2xl font-bold mb-4 md:mb-0">
      Become a part of such awesomeness
    </h2>
    <a
      href="/join"
      class="bg-green-400 hover:bg-green-500 text-gray-900 font-semibold px-6 py-3 rounded-lg shadow-md transition-transform transform hover:scale-105 hover:no-underline"
    >
      Join IOIT ACM
    </a>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("search-input-field");
    const tableBody = document.getElementById("membership-table-body");
    const rows = tableBody.getElementsByTagName("tr");
    const noResultsRow = document.getElementById("no-results-row");

    searchInput.addEventListener("input", (event) => {
      const query = event.target.value.toLowerCase();
      let matchesFound = false;

      for (const row of rows) {
        if (row.id === "no-results-row") continue;

        const cells = row.getElementsByTagName("td");
        let matches = false;

        for (const cell of cells) {
          if (cell.textContent.toLowerCase().includes(query)) {
            matches = true;
            break;
          }
        }

        row.style.display = matches ? "" : "none";
        if (matches) matchesFound = true;
      }

      noResultsRow.style.display = matchesFound ? "none" : "";
    });
  });
</script>

{% endblock %}
