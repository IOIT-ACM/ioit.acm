{% extends "competitions/base.html" %} {% block title %}Competitions{% endblock
%} {% block content %}
<div class="px-4 py-8">
  {% if current_user.is_authenticated %}
  <div id="Greeting"></div>
  {% endif %}

  <section class="bg-green-200 p-6 rounded-xl mb-8">
    <h2 class="text-2xl font-semibold mb-2">Announcement</h2>
    <p class="text-gray-700 mb-4">
      First edition of Bit-by-query will be live in next week. Stay tuned!
    </p>
  </section>

  <!-- Available Contests Section -->
  {% include "competitions/avaliable-contests.html" %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    {% if current_user.is_authenticated %}
      const hour = new Date().getHours();
      const userName = "{{ current_user.name.split(' ')[0] }}";

      let greeting;

      if (hour >= 0 && hour < 5) {
        greeting = `Happy Midnight, ${userName}!`;
      } else if (hour >= 5 && hour < 12) {
        greeting = `Good Morning, ${userName}!`;
      } else if (hour >= 12 && hour < 17) {
        greeting = `Good Afternoon, ${userName}!`;
      } else {
        greeting = `Good Evening, ${userName}!`;
      }

      const greetingElement = document.getElementById("Greeting");
      if (greetingElement) {
        greetingElement.classList.add('text-2xl', 'font-semibold', 'mb-10');
        greetingElement.innerText = greeting;
      }
    {% endif %}
  });
</script>

{% endblock %}
